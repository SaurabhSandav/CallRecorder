// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {

    repositories {
        mavenLocal()
        google()
        mavenCentral()
        maven { url "https://plugins.gradle.org/m2/" } // For Rust Gradle plugin
        jcenter()
    }

    dependencies {
        classpath AndroidTools.GRADLE_PLUGIN
        classpath Kotlin.GRADLE_PLUGIN
        classpath SQLDelight.GRADLE_PLUGIN
        classpath RustAndroidGradle.GRADLE_PLUGIN

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

plugins {
    id "com.github.ben-manes.versions" version "0.28.0"
}

allprojects {

    repositories {
        mavenLocal()
        google()
        mavenCentral()
        maven { url "https://jitpack.io" } // For compose-navigation
        maven { url "https://androidx.dev/snapshots/builds/${Compose.REPO_VERSION}/artifacts/ui/repository" }
        jcenter()
    }

    tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {
        kotlinOptions {
            jvmTarget = "1.8"
            freeCompilerArgs += [
                    '-progressive',
                    '-Xopt-in=kotlinx.coroutines.ExperimentalCoroutinesApi',
                    '-Xopt-in=kotlinx.coroutines.ObsoleteCoroutinesApi',
                    '-Xopt-in=kotlinx.coroutines.FlowPreview',
                    '-Xinline-classes',
                    /*'-Xnew-inference'*/
            ]
        }
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}
