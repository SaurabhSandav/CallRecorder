// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {

    repositories {

        // Compose from AOSP
        if (Compose.fromAOSP) {
            maven { url "/run/media/saurabh/Extra/Projects/Support/out/ui/build/support_repo/" }
            maven { url "/run/media/saurabh/Extra/Projects/Support/prebuilts/androidx/external/" }
        }

        mavenLocal()
        google()
        mavenCentral()
        jcenter()
    }

    dependencies {
        classpath AndroidTools.GRADLE_PLUGIN
        classpath Kotlin.GRADLE_PLUGIN
        classpath SQLDelight.GRADLE_PLUGIN

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

plugins {
    id "com.github.ben-manes.versions" version "0.28.0"
}

allprojects {

    repositories {

        // Compose from AOSP
        if (Compose.fromAOSP) {
            maven { url "/run/media/saurabh/Extra/Projects/Support/out/ui/build/support_repo/" }
            maven { url "/run/media/saurabh/Extra/Projects/Support/prebuilts/androidx/external/" }
        }

        mavenLocal()
        google()
        mavenCentral()
        maven { url "https://jitpack.io" }
        jcenter()
    }

    tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {
        kotlinOptions {
            jvmTarget = "1.8"
            freeCompilerArgs += [
                    '-progressive',
                    '-Xopt-in=kotlinx.coroutines.ExperimentalCoroutinesApi',
                    '-Xopt-in=kotlinx.coroutines.FlowPreview'/*,
                    '-Xnew-inference'*/
            ]
        }
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}
